<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts-config PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 1.3//EN"
"http://struts.apache.org/dtds/struts-config_1_3.dtd">

<struts-config>

  <form-beans>
    <!-- Forms for user-management actions -->
    <form-bean name="loginForm" type="org.gusdb.wdk.controller.form.LoginForm"/>
    <form-bean name="logoutForm" type="org.gusdb.wdk.controller.form.LogoutForm"/>

    <!-- Forms for site-specific functionality -->
    <form-bean name="questionForm" type="org.gusdb.wdk.controller.form.QuestionForm"/>
    <form-bean name="downloadConfigForm" type="org.gusdb.wdk.controller.form.DownloadConfigForm"/>
    <form-bean name="booleanExpressionForm" type="org.gusdb.wdk.controller.form.BooleanExpressionForm"/>
    <form-bean name="renameStepForm" type="org.gusdb.wdk.controller.form.RenameStepForm"/>
    <form-bean name="renameStrategyForm" type="org.gusdb.wdk.controller.form.RenameStrategyForm"/>
    <form-bean name="wizardForm" type="org.gusdb.wdk.controller.form.WizardForm"/>

  </form-beans>

  <global-exceptions>
    <exception key="global.error.user" path="/showErrorPage.do?type=user" scope="request"
               type="org.gusdb.wdk.model.WdkUserException"/>
    <exception key="global.error.model" path="/showErrorPage.do?type=model" scope="request"
               type="org.gusdb.wdk.model.WdkModelException"/>
    <exception key="global.error.runtime" path="/showErrorPage.do?type=runtime" scope="request"
               type="java.lang.RuntimeException"/>
    <exception key="global.error.other" path="/showErrorPage.do?type=other" scope="request"
               type="java.lang.Exception"/>
   
  </global-exceptions>

  <global-forwards type="org.apache.struts.action.ActionForward">
    <forward name="home" path="/WEB-INF/jsp/home.jsp"/>
    <forward name="needs_login" path="/showLogin.do"/>
    <forward name="application_error" path="/WEB-INF/jsp/error.jsp"/>

  </global-forwards>

  <action-mappings>

    <!-- Front-page Actions -->

    <action path="/home"
            parameter="org.gusdb.wdk.controller.action.standard.GenericPageAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="success" path="/WEB-INF/jsp/home.jsp"/>
    </action>
    <action path="/about"
            parameter="org.gusdb.wdk.controller.action.standard.GenericPageAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="success" path="/WEB-INF/jsp/about.jsp"/>
    </action>
    <action path="/contact"
            parameter="org.gusdb.wdk.controller.action.standard.GenericPageAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="success" path="/WEB-INF/jsp/contact.jsp"/>
    </action>
    <action path="/contactUs"
            parameter="org.eupathdb.common.controller.action.ContactUsAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="success" path="/WEB-INF/jsp/contactBack.jsp"/>
    </action>
    <action path="/showErrorPage"
            parameter="org.gusdb.wdk.controller.action.standard.ShowErrorPageAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper"
            scope="request">
    </action>


    <!-- User Account Maintenance Actions -->

    <action path="/showLogin"
            parameter="org.gusdb.wdk.controller.action.user.ShowLoginAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="success" path="/WEB-INF/jsp/login.jsp"/>
      <forward name="show_profile" path="/app/user/profile" redirect="true"/>
    </action>
    <action path="/processLogin"
            parameter="org.gusdb.wdk.controller.action.user.ProcessLoginAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <!-- In most success cases, action will forward directly to original referring page -->
      <forward name="success" path="/showApplication.do" redirect="true"/>
      <forward name="input" path="/WEB-INF/jsp/login.jsp"/>
    </action>
    <action path="/processLogout"
            parameter="org.gusdb.wdk.controller.action.user.ProcessLogoutAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="success" path="/home.do" redirect="true"/>
    </action>
    <action path="/validateLoginCookie"
            parameter="org.gusdb.wdk.controller.action.services.LoginCookieValidationService"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <!-- Other, "unconverted" actions -->

    <action
	path="/showFavorite"
	type="org.gusdb.wdk.controller.action.ShowFavoriteAction"
	validate="false">
      <forward name="showFavorite" path="/wdkCustomization/jsp/Favorite.jsp"/>
    </action>
    <action
	path="/processFavorite"
	type="org.gusdb.wdk.controller.action.ProcessFavoriteAction"
	validate="false">
    </action>
    <action
	path="/showBasket"
	type="org.gusdb.wdk.controller.action.ShowBasketAction"
	validate="false">
      <forward name="showBasket" path="/showSummary.do"/>
    </action>
    <action
	path="/processBasket"
	type="org.gusdb.wdk.controller.action.ProcessBasketAction"
	validate="false">
    </action>
    <action
	path="/expandStep"
	type="org.gusdb.wdk.controller.action.ExpandStepAction"
	validate="false">
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/importStrategy"
	type="org.gusdb.wdk.controller.action.ImportStrategyAction"
	validate="false">
      <forward name="show_application" path="/showApplication.do"/>
    </action>
    <action
	path="/im"
	type="org.gusdb.wdk.controller.action.ImportStrategyAction"
	validate="false">
      <forward name="show_application" path="/showApplication.do"/>
    </action>
    <action
	path="/closeStrategy"
	type="org.gusdb.wdk.controller.action.CloseStrategyAction"
	validate="false">
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/deleteStep"
	type="org.gusdb.wdk.controller.action.DeleteStepAction"
	validate="false">
      <forward name="show_strategy" path="/showStrategy.do"/>
      <forward name="delete_strategy" path="/deleteStrategy.do"/>
    </action>
    <action
	path="/moveStep"
	type="org.gusdb.wdk.controller.action.MoveStepAction"
	validate="false">
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/processFilter"
	type="org.gusdb.wdk.controller.action.ProcessFilterAction"
	validate="false"
	name="questionForm" scope="request">
      <forward name="show_error" path="/summaryError.jsp"/>
      <forward name="process_boolean_expression" path="/processBooleanExpression.do"/>
      <forward name="show_summary" path="/showSummary.do"/>
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/deleteStrategy"
	type="org.gusdb.wdk.controller.action.DeleteStrategyAction">
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/showStrategy"
	type="org.gusdb.wdk.controller.action.ShowStrategyAction">
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/getFilterLink"
	type="org.gusdb.wdk.controller.action.GetFilterLinkAction">
      <forward name="show_summary" path="showSummary.do"/>
    </action>
    <action
	path="/showQuestion"
	type="org.gusdb.wdk.controller.action.ShowQuestionAction"
	validate="false"
	name="questionForm" scope="request">
      <forward name="skip_to_summary" path="/showSummary.do"/>
    </action>
    <action
	path="/showQuestionSets"
	type="org.gusdb.wdk.controller.action.ShowQuestionSetsAction"
	name="questionForm" scope="request">
      <forward name="show_questionsets" path="/questionSets.jsp"/>
    </action>
    <action
	path="/showQuestionSetsFlat"
	type="org.gusdb.wdk.controller.action.ShowQuestionSetsFlatAction"
	name="questionForm" scope="request"
	input="/showQuestion.do">
      <forward name="show_questionsetsflat" path="/questionSetsFlat.jsp"/>
    </action>
    <action
	path="/processQuestionSetsFlat"
	type="org.gusdb.wdk.controller.action.ProcessQuestionSetsFlatAction"
	name="questionForm" scope="request"
	input="/showQuestion.do">
      <forward name="process_questionsetsflat" path="/processQuestion.do?fromQuestionSet=1"/>
    </action>
    <action
	path="/processQuestion"
	type="org.gusdb.wdk.controller.action.ProcessQuestionAction"
	name="questionForm" scope="request"
	input="/showQuestion.do">
      <forward name="pq_show_summary" path="/showSummary.do"/>
      <forward name="pq_start_boolean" path="/startBoolean.do"/>
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <!-- * is question set name -->
    <action
	path="/*.wadl"
	type="org.gusdb.wdk.controller.action.services.ProcessRESTAction"
	scope="request"
	validate="false"
	parameter="{1}.all::wadl">
      <forward name="show_result" path="downloadResult.jsp"/>
    </action>
    <!--
	{1} question set name
	{2} question name; if the name is "all" & {3} is wadl, it's equivalent to the action above.
	{3} json|xml|wadl
    -->
    <action
	path="/*/*.*"
	type="org.gusdb.wdk.controller.action.services.ProcessRESTAction"
	scope="request"
	validate="false"
	parameter="{1}.{2}::{3}">
      <forward name="show_result" path="/downloadResult.jsp"/>
    </action>

    <action
	path="/showSummary"
	type="org.gusdb.wdk.controller.action.ShowSummaryAction"
	name="questionForm" scope="request"
	input="/showQuestion.do">
      <forward name="show_application" path="/showApplication.do"/>
      <forward name="skip_to_record" path="/showRecord.do"/>
      <forward name="skip_to_download" path="/downloadStep.do"/>
    </action>
    <action
	path="/showApplication"
	type="org.gusdb.wdk.controller.action.ShowApplicationAction"
	input="/showSummary.do">
    </action>
    <action
	path="/processSummaryView"
	type="org.gusdb.wdk.controller.action.ProcessSummaryViewAction"
	input="/showSummaryView.do">
      <forward name="show-summary-view" path="/showSummaryView.do"/>
      <forward name="pq-show-basket" path="/showBasket.do"/>
    </action>
     <action path="/showRecord"
        parameter="org.gusdb.wdk.controller.actions.client.RecordPageAdapter"
        type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper"/>
    <action
	path="/configDownload"
	type="org.gusdb.wdk.controller.action.ConfigDownloadAction"
	name="downloadConfigForm">
      <forward name="config_download" path="/getDownloadResult.do"/>
    </action>
    <action
	path="/getDownloadResult"
	type="org.gusdb.wdk.controller.action.GetDownloadResultAction"
	name="downloadConfigForm">
    </action>
    <action
	path="/showQueryHistory"
	type="org.gusdb.wdk.controller.action.ShowQueryHistoryAction">
    </action>
    <action
	path="/downloadStep"
	type="org.gusdb.wdk.controller.action.DownloadStepRedirectAction">
    </action>
    <action path="/showPublicStrats"
            parameter="org.gusdb.wdk.controller.action.ShowPublicStratsAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="success" path="/wdk/jsp/showPublicStrats.jsp"/>
    </action>
    <action path="/processPublicStratStatus"
            parameter="org.gusdb.wdk.controller.action.ProcessPublicStratsStatusAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action
	path="/renameStep"
	type="org.gusdb.wdk.controller.action.ProcessRenameStepAction"
	name="renameStepForm">
      <forward name="rename_history" path="/showApplication.do"/>
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/renameStrategy"
	type="org.gusdb.wdk.controller.action.ProcessRenameStrategyAction"
	name="renameStrategyForm">
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/processBooleanExpression"
	type="org.gusdb.wdk.controller.action.ProcessBooleanExpressionAction"
	name="booleanExpressionForm"
	input="/showQueryHistory.do">
      <forward name="show_strategy" path="/showStrategy.do"/>
      <forward name="process_boolean_expression" path="/showSummary.do"/>
    </action>
    <action
	path="/showXmlDataList"
	type="org.gusdb.wdk.controller.action.ShowXmlDataListAction">
    </action>
    <action
	path="/showXmlDataContent"
	type="org.gusdb.wdk.controller.action.ShowXmlDataContentAction">
    </action>
    <action
	path="/showResultSize"
	type="org.gusdb.wdk.controller.action.ShowResultSizeAction">
    </action>
    <action
	path="/copyStrategy"
	type="org.gusdb.wdk.controller.action.CopyStrategyAction">
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/getVocab"
	type="org.gusdb.wdk.controller.action.GetVocabAction"
	name="questionForm" scope="request"
	validate="false">
    </action>
    <action
	path="/getMetadata"
	type="org.gusdb.wdk.controller.action.GetMetadataAction"
	scope="request"
	validate="false">
    </action>
    <action path="/wizard"
	    type="org.gusdb.wdk.controller.action.WizardAction"
	    name="wizardForm"
	    scope="request"
	    validate="false">
      <forward name="show_wizards" path="/wdk/jsp/wizard/wizards.jsp"/>
    </action>
    <action
	path="/processBoolean"
	type="org.gusdb.wdk.controller.action.ProcessBooleanAction"
	validate="true"
	name="questionForm" scope="request">
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/processStep"
	type="org.gusdb.wdk.controller.action.ProcessStepAction"
	validate="true"
	name="questionForm" scope="request">
      <forward name="show_strategy" path="/showStrategy.do"/>
    </action>
    <action
	path="/showSummaryView"
	type="org.gusdb.wdk.controller.action.ShowSummaryViewAction"
	validate="true">
    </action>
    <action
	path="/showRecordView"
	type="org.gusdb.wdk.controller.action.ShowRecordViewAction"
	validate="true">
    </action>
    <action
	path="/invokeAttributePlugin"
	type="org.gusdb.wdk.controller.action.InvokeAttributePluginAction"
	validate="false">
      <forward name="display" redirect="false" path="/wdk/jsp/results/attributePlugin.jsp"/>
    </action>


    <!-- Step Analysis Actions -->
    <action path="/showNewAnalysisTab"
            parameter="org.gusdb.wdk.controller.action.analysis.ShowStepAnalysisTabAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="success" path="/wdk/jsp/analysis/stepAnalysisSelection.jsp"/>
    </action>
    <action path="/createStepAnalysis"
            parameter="org.gusdb.wdk.controller.action.analysis.CreateStepAnalysisAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action path="/copyStepAnalysis"
            parameter="org.gusdb.wdk.controller.action.analysis.CopyStepAnalysisAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action path="/runStepAnalysis"
            parameter="org.gusdb.wdk.controller.action.analysis.RunStepAnalysisAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action path="/rerunStepAnalysis"
            parameter="org.gusdb.wdk.controller.action.analysis.RerunStepAnalysisAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action path="/renameStepAnalysis"
            parameter="org.gusdb.wdk.controller.action.analysis.RenameStepAnalysisAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action path="/deleteStepAnalysis"
            parameter="org.gusdb.wdk.controller.action.analysis.DeleteStepAnalysisAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action path="/stepAnalysis"
            parameter="org.gusdb.wdk.controller.action.analysis.GetStepAnalysisAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action path="/stepAnalysisPane"
            parameter="org.gusdb.wdk.controller.action.analysis.ShowStepAnalysisAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="success" path="/wdk/jsp/analysis/stepAnalysisPane.jsp"/>
    </action>
    <action path="/stepAnalysisForm"
            parameter="org.gusdb.wdk.controller.action.analysis.ShowStepAnalysisFormAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="invalidStep" path="/wdk/jsp/analysis/invalidStep.jsp"/>
    </action>
    <action path="/stepAnalysisResult"
            parameter="org.gusdb.wdk.controller.action.analysis.ShowStepAnalysisResultAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
      <forward name="pending" path="/wdk/jsp/analysis/resultsPending.jsp"/>
      <forward name="incomplete" path="/wdk/jsp/analysis/resultsIncomplete.jsp"/>
    </action>
    <action path="/stepAnalysisResource"
            parameter="org.gusdb.wdk.controller.action.analysis.GetStepAnalysisResourceAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action path="/clearStepAnalysisCache"
            parameter="org.gusdb.wdk.controller.action.analysis.ClearStepAnalysisCacheAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>
    <action path="/stepAnalysisAll"
            parameter="org.gusdb.wdk.controller.action.analysis.GetAllStepAnalysisAction"
            type="org.gusdb.wdk.controller.actionutil.WdkActionWrapper">
    </action>


    <!-- NIAGADS -specific actions -->


  </action-mappings>

  <controller maxFileSize="10M" />

  <message-resources parameter="org.gusdb.wdk.view.DefaultViewResources" null="false"/>

</struts-config>
