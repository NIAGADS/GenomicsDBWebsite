<?xml version="1.0" encoding="UTF-8"?>
<wdkModel>
  <recordClassSet name="TrackRecordClasses">

    <recordClass name="TrackRecordClass" displayName="Summary Statistics Dataset Report"
		 displayNamePlural="Tracks" shortDisplayName="Track" useBasket="false" urlName="track">

      <!-- =================================================================== -->
      <!-- Primary Key -->
      <!-- =================================================================== -->

      <primaryKey aliasPluginClassName="org.gusdb.wdk.model.record.GenericRecordPrimaryKeyAliasPlugin">
	<columnRef>track</columnRef>
      </primaryKey>

      <idAttribute name="primary_key" displayName="Dataset" help="explore this dataset">
	<text>
	  <![CDATA[$$name$$]]>
	</text>
      </idAttribute>

      <testParamValues>
	<paramValue name="track">NG00027_STAGE1</paramValue>
      </testParamValues>


      <!-- =================================================================== -->
      <!-- Reporters -->
      <!-- =================================================================== -->
      <reporter name="fullRecord" displayName="%%fullReporterDisplayName%%" scopes="record" implementation="org.gusdb.wdk.model.report.reporter.FullRecordReporter" />

      <reporter name="attributesTabular" displayName="%%attributesReporterDisplayName%%" scopes="results" implementation="org.gusdb.wdk.model.report.reporter.AttributesTabularReporter">
	<description>%%attributesReporterDescription%%</description>
	<property name="page_size">1000000</property>
      </reporter>

      <reporter name="tableTabular" displayName="%%tableReporterDisplayName%%" scopes="results" implementation="org.gusdb.wdk.model.report.reporter.TableTabularReporter">
	<description>%%tableReporterDescription%%</description>
	<property name="page_size">1000000</property>
      </reporter>

      <reporter name="xml" displayName="XML: choose from columns
					and/or tables" scopes="" implementation="org.gusdb.wdk.model.report.reporter.XMLReporter"></reporter>

  <!--    <reporter name="json" displayName="JSON: choose from columns
					 and/or tables" scopes="record,results" implementation="org.gusdb.wdk.model.report.reporter.JSONReporter"></reporter>
-->
      <!-- =============================================================== -->
      <!-- Step Analysis Plugins -->
      <!-- =============================================================== -->

      <!-- <stepAnalysisRef name="pathway-enrichment"/> -->

      <!-- =============================================================== -->
      <!-- Annotation and Link Outs -->
      <!-- =============================================================== -->

      <attributesList summary="description,accession_link,search_link" />

      <attributeQueryRef ref="GwasDatasetAttributes.BasicAttributes">
	<columnAttribute name="project_id" internal="true" inReportMaker="false" type="string" />
	<columnAttribute name="name" displayName="Name" type="string" />
	<columnAttribute name="attribution" displayName="Attribution" type="string" />
	<columnAttribute name="description" displayName="Description" type="string" />
	<columnAttribute name="accession_link" displayName="Accession" type="json_link" help="NIAGADS accession with which this dataset is associated, view full details, request download, or browse associated datasets" />
	<columnAttribute name="search_link" displayName="Mine Dataset" type="json_link" help="retrieve the top variants in this dataset, modify filter criteria/download result" />
	<columnAttribute name="niagads_accession" displayName="Accession" type="string" internal="true" help="NIAGADS accession with which this dataset is associated, view full details, request download, or browse associated datasets" />
	<columnAttribute name="category" displayName="Category" type="string" internal="true" inReportMaker="false" />
	<columnAttribute name="is_adsp" displayName="ADSP Dataset" type="json_icon" help="data generated by the Alzheimer's Disease Sequencing Project (ADSP)" />
      </attributeQueryRef>

      <!-- <attributeQueryRef ref="GwasDatasetAttributes.CovariateList"> -->
      <!-- 	<columnAttribute name="covariate_list" displayName="Covariates" type="string" help="study covariates"/> -->
      <!-- </attributeQueryRef> -->

      <!-- <attributeQueryRef ref="GwasDatasetAttributes.PhenotypeList"> -->
      <!-- 	<columnAttribute name="phenotype_list" displayName="Phenotypes" type="string" -->
      <!-- help="phenotypes assessed in the study, may incl.: population, diagnosis, neuropathology, biomarker, APOE allele carrier status"/> -->
      <!-- </attributeQueryRef> -->

	<attributeQueryRef ref="GwasDatasetAttributes.RelatedTracks">
	<columnAttribute name="related_tracks" displayName="Related Tracks" type="json"/>
	</attributeQueryRef>

      <!-- <table name="phenotypes" displayName="Phenotypes" queryRef="GwasDatasetTables.Phenotypes">
	   <columnAttribute name="phenotype_category" displayName="Category" type="string"/>
	   <columnAttribute name="phenotype" displayName="Phenotype" type="string" />
	   <propertyList name="type">
	   <value>default</value>
	   </propertyList>
	   <propertyList name="defaultOpen">
	   <value>true</value>
	   </propertyList>
	   
	   <description>
	   <![CDATA[
	   Phenotypes associated with this dataset.
	   ]]>
	   </description>
	   </table> -->


      <!-- =============================================================== -->
      <!-- Genetic Variation  -->
      <!-- =============================================================== -->

      <attributeQueryRef ref="GwasDatasetAttributes.TopGenes">
	<columnAttribute name="top_gene_list" displayName="Top Genes" type="json" internal="true" inReportMaker="false" />
      </attributeQueryRef>

      <table name="top_variants" displayName="Top Variants" queryRef="GwasDatasetTables.TopVariants">
	   <columnAttribute name="variant_link" displayName="Variant" type="json_link"/>
	   <columnAttribute name="pvalue" displayName="p-value" type="numeric"/>
	   <columnAttribute name="ref_snp_id" displayName="refSNP" type="string"/>
	   <columnAttribute name="adsp_variant_flag" displayName="ADSP?" help="variant identified by the ADSP and passed the ADSP QC protocol" type="json_icon"/>
	   <columnAttribute name="most_severe_consequence" displayName="Consequence" help="most severe predicted consequence made for this variant; identified by the ADSP annotation pipeline" type="string"/>
	   <columnAttribute name="msc_impact" displayName="Impact" help="relative impact of the predicted consequence" type="string"/>
	   <columnAttribute name="msc_impacted_gene_link" displayName="Impacted Gene" help="gene impacted by most severe predicted consequence made for this variant; identified by the ADSP annotation pipeline" type="json_link"/>
	   <columnAttribute name="msc_is_coding_flag" displayName="Is Coding?" help="flagged as a coding variant by the ADSP annotation pipeline" type="json_icon"/>

	   <propertyList name="flags">
	     <value>{"defaultOpen": true, "filter": true}</value>
	   </propertyList>
	   
	   <propertyList name="column_filter">
	     <value>{"pvalue":"pvalue", "adsp_variant_flag": "pie",  "msc_impact": "pie", "msc_is_coding_flag":"pie", "msc_impact": "pie"}</value>
	</propertyList>
	
	
	<description>
	  <![CDATA[
		   Top variants from this GWAS summary statistics dataset.
	  ]]>
	</description>
      </table> 

 
    
    </recordClass>


  </recordClassSet>
</wdkModel>
